<nav class="navbar navbar-expand-lg" style="background-image: linear-gradient(90deg,#0067CF,#023b76);">
  <div class="container-fluid">
    <a class="navbar-brand" href="#" style="color: #e3eaef" routerLink="/"> <img
        src="https://firebasestorage.googleapis.com/v0/b/istateca.appspot.com/o/logos%2Flogo%20blanco.png?alt=media&token=0fd4deda-5a8c-4db7-89eb-05e8c1e1643c"
        alt="" width="100" height="30"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="container-fluid">
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0" *ngIf="sinSesion!=true">
          <div>
            <li class="nav-item " *ngIf="admin==true">
              <a class="nav-link active" href="#" routerLink="/app-registro-bibliotecario">
                <img
                  src="https://firebasestorage.googleapis.com/v0/b/istateca.appspot.com/o/Iconos%2Fagregar-usuario%20(1).png?alt=media&token=c04b535c-bdbd-4f71-9d57-1688666ddd43"
                  alt="" width="25" height="25"></a>
            </li>
          </div>
          <li class="nav-item" *ngIf="estudiante==false">
            <a class="nav-link active" href="#" routerLink="/app-vista-registro-new">
              <img
                src="https://firebasestorage.googleapis.com/v0/b/istateca.appspot.com/o/Iconos%2Fagregar%20(1).png?alt=media&token=077d2984-4b56-4b72-a862-7be65d5f4832"
                alt="" width="25" height="25"></a>
          </li>

          <li class="nav-item dropdown" *ngIf="estudiante==false">
            <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">
              <img
                src="https://firebasestorage.googleapis.com/v0/b/istateca.appspot.com/o/Iconos%2Fleyendo.png?alt=media&token=c5b2cfa9-9418-4087-aff0-b7e6f07fbe1b"
                alt="" width="25" height="25">
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" routerLink="/app-lista-solicitudes-pendientes">Lista de Solicitudes</a></li>
              <li>
                <hr class="dropdown-divider">
              </li>
              <li><a class="dropdown-item" routerLink="/app-registro-solicitud">Registrar una Solicitud</a></li>
              <li><a class="dropdown-item" routerLink="/app-registro-solicitud-tercerapersona">Registrar una Solicitud para una persona externa</a></li>
            </ul>
          </li>


          <li class="nav-item dropdown" *ngIf="estudiante==false">
            <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">
              <img
                src="https://firebasestorage.googleapis.com/v0/b/istateca.appspot.com/o/Iconos%2Flista.png?alt=media&token=95e8450f-1aee-4a02-9068-4550a86f63e5"
                alt="" width="25" height="25"></a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" routerLink="/app-lista-bibliotecarios">Lista Bibliotecarios</a></li>
              <li>
                <hr class="dropdown-divider">
              </li>
              <li><a class="dropdown-item" routerLink="/app-listas">Lista Autor-Tipo</a></li>
            </ul>
          </li>


          <li class="nav-item dropdown" *ngIf="estudiante==false">
            <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">
              <img
                src="https://firebasestorage.googleapis.com/v0/b/istateca.appspot.com/o/Iconos%2Freporte-de-negocios.png?alt=media&token=b47985f5-b219-4d8e-ace8-0095991d1aaf"
                alt="" width="25" height="25"></a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" routerLink="/app-reporte-libros">Reporte de Libros</a></li>
              <li>
                <hr class="dropdown-divider">
              </li>
              <li><a class="dropdown-item" routerLink="/app-reporte-sugerencias">Reporte de Sugerencias</a></li>
            </ul>
          </li>
        </ul>



        <div *ngIf="bibliotecario || admin">
          <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"
              style="background-color: transparent; border: none;color: #0067CF;">
              <img
                src="https://firebasestorage.googleapis.com/v0/b/istateca.appspot.com/o/Iconos%2Fnotificacion.png?alt=media&token=d3afd330-3414-4ed6-b131-a498de2ba691"
                alt="" width="25" height="25">
              <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                *ngIf="nuevosRegistros > 0">
                {{nuevosRegistros}}
                <span class="visually-hidden">unread messages</span>
              </span>
            </button>
            <div class="dropdown-menu" style="max-width: 200px; background-color: transparent; border: none;"
              (change)="ocultar()">
              <div class="notification-container" >
                <h3>Notificaciones
                  <i class="material-icons dp48 right" (click)="clear()">clear</i>

                </h3>

                <hr>
                

                  <table class="table">

                    <tbody class="text-center" style="font-size: 70%;">
                      <tr *ngFor="let mensaje of notificationlista">

                        <td *ngIf="mensaje.mensaje == 1">El usuario "{{mensaje.prestamo?.idSolicitante?.nombres}}" ha
                          solicitado el libro "{{mensaje.prestamo?.libro?.titulo}}".</td>
                        <td *ngIf="mensaje.mensaje == 4" style="background-color: rgb(245, 137, 136);"><strong>El préstamo del libro "{{mensaje.prestamo?.libro?.titulo}}" al
                          usuario "{{mensaje.prestamo?.idSolicitante?.nombres}}" a superado la fecha de devolución
                          "{{mensaje.prestamo?.fechaDevolucion}}".</strong> </td>

                        <td *ngIf="mensaje.mensaje == 1">

                          <button class="Btn" *ngIf="!mensaje.visto" (click)="alerta(mensaje)"
                            style="  top:  100%; background-color: rgb(245, 137, 136);">

                            <div class="sign"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                <path
                                  d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z" />
                              </svg></div>

                            <div class="text">Revisar</div>
                          </button>

                          <button class="Btn" *ngIf="mensaje.visto"
                            style="  top:  100%; background-color: rgb(129, 242, 129);">

                            <div class="sign"><svg xmlns="http://www.w3.org/2000/svg" width="20%" height="20%"
                                fill="currentColor" class="bi bi-check-all" viewBox="0 0 16 16">
                                <path
                                  d="M8.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L2.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093L8.95 4.992a.252.252 0 0 1 .02-.022zm-.92 5.14.92.92a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 1 0-1.091-1.028L9.477 9.417l-.485-.486-.943 1.179z" />
                              </svg></div>

                            <div class="text">&nbsp;&nbsp;Revisado</div>
                          </button>


                        </td>

                        <td *ngIf="mensaje.mensaje == 4"  style="background-color: rgb(245, 137, 136);">

                          <button class="Btn" *ngIf="!mensaje.visto" (click)="alerta(mensaje)"
                            style="  top:  100%; background-color: rgb(245, 137, 136);">

                            <div class="sign"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                <path
                                  d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z" />
                              </svg></div>

                            <div class="text">Revisar</div>
                          </button>

                          <button class="Btn" *ngIf="mensaje.visto"
                            style="  top:  100%; background-color: rgb(129, 242, 129);">

                            <div class="sign"><svg xmlns="http://www.w3.org/2000/svg" width="20%" height="20%"
                                fill="currentColor" class="bi bi-check-all" viewBox="0 0 16 16">
                                <path
                                  d="M8.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L2.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093L8.95 4.992a.252.252 0 0 1 .02-.022zm-.92 5.14.92.92a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 1 0-1.091-1.028L9.477 9.417l-.485-.486-.943 1.179z" />
                              </svg></div>

                            <div class="text">&nbsp;&nbsp;Revisado</div>
                          </button>


                        </td>

                      </tr>


                    </tbody>
                  </table>
                



              </div>
            </div>
          </div>
        </div>


        <div *ngIf="estudiante">
          <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"
              style="background-color: transparent; border: none;color: #0067CF;">
              <img
                src="https://firebasestorage.googleapis.com/v0/b/istateca.appspot.com/o/Iconos%2Fnotificacion.png?alt=media&token=d3afd330-3414-4ed6-b131-a498de2ba691"
                alt="" width="25" height="25">
              <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                *ngIf="nuevosRegistrosEst > 0">
                {{nuevosRegistrosEst}}
                <span class="visually-hidden">unread messages</span>
              </span>
            </button>
            <div class="dropdown-menu" style="max-width: 200px; background-color: transparent; border: none;"
              (change)="ocultar()">
              <div class="notification-container" >
                <h3>Notificaciones
                  <i class="material-icons dp48 right" (click)="clear()">clear</i>

                </h3>

                <hr>
                

                  <table class="table">

                    <tbody class="text-center" style="font-size: 70%;">
                      <td *ngIf="notificationlistaest == null">No tienes notificaciones nuevas</td>
                      <tr *ngFor="let mensaje of notificationlistaest">
                        
                        <td *ngIf="mensaje.mensaje == 3">Su prestamo ha sido rechazado.</td>
                        <td *ngIf="mensaje.mensaje == 5" ><strong>Su préstamo del libro "{{mensaje.prestamo?.libro?.titulo}}" a superado la fecha de devolución  "{{mensaje.prestamo?.fechaMaxima}}".</strong> </td>
                        <td *ngIf="mensaje.mensaje == 7">No olvides devolver el libro "{{mensaje.prestamo?.libro?.titulo}}" hasta el "{{mensaje.prestamo?.fechaMaxima}}".</td>
                        <td *ngIf="mensaje.mensaje == 6" >Su prestamo del libro "{{mensaje.prestamo?.libro?.titulo}}" a sido devuelto exitosamente.</td>
                        
                        <td *ngIf="mensaje.mensaje == 3">

                          <button class="Btn" *ngIf="!mensaje.visto" (click)="alertaestudiante(mensaje)"
                            style="  top:  100%; background-color: rgb(245, 137, 136);">

                            <div class="sign"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                <path
                                  d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z" />
                              </svg></div>

                            <div class="text">Revisar</div>
                          </button>

                          <button class="Btn" *ngIf="mensaje.visto"
                            style="  top:  100%; background-color: rgb(129, 242, 129);">

                            <div class="sign"><svg xmlns="http://www.w3.org/2000/svg" width="20%" height="20%"
                                fill="currentColor" class="bi bi-check-all" viewBox="0 0 16 16">
                                <path
                                  d="M8.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L2.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093L8.95 4.992a.252.252 0 0 1 .02-.022zm-.92 5.14.92.92a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 1 0-1.091-1.028L9.477 9.417l-.485-.486-.943 1.179z" />
                              </svg></div>

                            <div class="text" >&nbsp;&nbsp;Revisado</div>
                          </button>


                        </td>
                        
                        <td *ngIf="mensaje.mensaje == 5"  >

                          <button class="Btn" *ngIf="!mensaje.visto" (click)="alertaestudiante(mensaje)"
                            style="  top:  100%; background-color: rgb(245, 137, 136);">

                            <div class="sign"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                <path
                                  d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z" />
                              </svg></div>

                            <div class="text">Revisar</div>
                          </button>

                          <button class="Btn" *ngIf="mensaje.visto"
                            style="  top:  100%; background-color: rgb(129, 242, 129);">

                            <div class="sign"><svg xmlns="http://www.w3.org/2000/svg" width="20%" height="20%"
                                fill="currentColor" class="bi bi-check-all" viewBox="0 0 16 16">
                                <path
                                  d="M8.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L2.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093L8.95 4.992a.252.252 0 0 1 .02-.022zm-.92 5.14.92.92a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 1 0-1.091-1.028L9.477 9.417l-.485-.486-.943 1.179z" />
                              </svg></div>

                            <div class="text">&nbsp;&nbsp;Revisado</div>
                          </button>


                        </td>

                        
                        <td *ngIf="mensaje.mensaje == 7">

                          <button class="Btn" *ngIf="!mensaje.visto" (click)="alertaestudiante(mensaje)"
                            style="  top:  100%; background-color: rgb(245, 137, 136);">

                            <div class="sign"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                <path
                                  d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z" />
                              </svg></div>

                            <div class="text">Revisar</div>
                          </button>

                          <button class="Btn" *ngIf="mensaje.visto"
                            style="  top:  100%; background-color: rgb(129, 242, 129);">

                            <div class="sign"><svg xmlns="http://www.w3.org/2000/svg" width="20%" height="20%"
                                fill="currentColor" class="bi bi-check-all" viewBox="0 0 16 16">
                                <path
                                  d="M8.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L2.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093L8.95 4.992a.252.252 0 0 1 .02-.022zm-.92 5.14.92.92a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 1 0-1.091-1.028L9.477 9.417l-.485-.486-.943 1.179z" />
                              </svg></div>

                            <div class="text" >&nbsp;&nbsp;Revisado</div>
                          </button>


                        </td>



                        
                        <td *ngIf="mensaje.mensaje == 6" >

                          <button class="Btn" *ngIf="!mensaje.visto" (click)="alertaestudiante(mensaje)"
                            style="  top:  100%; background-color: rgb(245, 137, 136);">

                            <div class="sign"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                <path
                                  d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z" />
                              </svg></div>

                            <div class="text">Revisar</div>
                          </button>

                          <button class="Btn" *ngIf="mensaje.visto"
                            style="  top:  100%; background-color: rgb(129, 242, 129);">

                            <div class="sign"><svg xmlns="http://www.w3.org/2000/svg" width="20%" height="20%"
                                fill="currentColor" class="bi bi-check-all" viewBox="0 0 16 16">
                                <path
                                  d="M8.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L2.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093L8.95 4.992a.252.252 0 0 1 .02-.022zm-.92 5.14.92.92a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 1 0-1.091-1.028L9.477 9.417l-.485-.486-.943 1.179z" />
                              </svg></div>

                            <div class="text">&nbsp;&nbsp;Revisado</div>
                          </button>


                        </td>
                      </tr>


                    </tbody>
                  </table>
                



              </div>
            </div>
          </div>
        </div>

        <div class="dropdown" *ngIf="sinSesion!=true">
          <a class="btn btn-primary dropdown-item" style="background:transparent ; border-color: white"
            routerLink="/app-form-editUsuario">

            <img
              src="https://firebasestorage.googleapis.com/v0/b/istateca.appspot.com/o/Iconos%2Fconfiguracion.png?alt=media&token=300f3996-9d7f-4d7b-8bd5-3641c4e53031"
              width="25" height="25">
          </a>
        </div>
        &nbsp;&nbsp;

        <app-login class="boton" *ngIf="(auth.isAuthenticated$ | async) === false">
        </app-login>

        <app-logout class="boton" *ngIf="auth.isAuthenticated$ | async">
        </app-logout>

        <ul *ngIf="auth.user$ | async as user">
          <li class="usuario">{{ user.name }}</li>
          <li class="usuario">{{ user.email }}</li>
        </ul>
      </div>

    </div>

  </div>
</nav>